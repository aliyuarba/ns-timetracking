<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="icon" type="image/png" sizes="32x32" href="./images/favicon-32x32.png">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css" rel="stylesheet"
    crossorigin="anonymous">
  <link rel="stylesheet" href="./css/style.css">

  <title>Time tracking dashboard | Nospaceid</title>

</head>

<body class="bg-verydarkblue">

  <div class="container my-5 py-lg-5">
    <div class="row">
      <div class="col-lg-3 pb-3">
        <div id="profile" class="profile bg-darkblue w-100 h-100 rounded-5 d-flex flex-column">
          <!-- inner profile -->
          <div class="bg-blue text-light p-4 pt-5 d-flex flex-lg-column align-items-center align-items-lg-start rounded-5">
            <div class="w-lg-100 w-xs-50 h-auto d-flex">
              <div class="w-50 h-auto mx-auto ms-lg-0 rounded-circle" style="border: 2.7px solid white;">
                <img src="/images/image-jeremy.png" alt="" class="w-100 h-100">
              </div>
            </div>
            <div class="ms-lg-0">
              <p class="mb-0 mt-lg-4 text-capitalize text-paleblue">report for</p>
              <p class="display-6">Jeremy <br /> Robson</p>
            </div>
          </div>

          <!-- navigation -->
          <div class="menu text-light flex-grow-1 d-flex flex-lg-column justify-content-around px-2 px-sm-5 py-4 p-lg-4 text-capitalize">
            <a href="#profile" class="link text-decoration-none text-desaturatedblue">daily</a>
            <a href="#profile" class="link text-decoration-none text-desaturatedblue active">weekly</a>
            <a href="#profile" class="link text-decoration-none text-desaturatedblue">monthly</a>
          </div>
        </div>
      </div>

      <div class="col-lg-9">
        <div class="row" id="tiles"></div>
      </div>
    </div>
  </div>
  <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js"></script>
  <script type="module">
    import { masterdata } from './data.js';

    const data = [...masterdata];

    const ui = [
      ['lightorange', './images/icon-work.svg'],
      ['softblue', './images/icon-play.svg'],
      ['lightred', './images/icon-study.svg'],
      ['limegreen', './images/icon-exercise.svg'],
      ['violet', './images/icon-social.svg'],
      ['softorange', './images/icon-self-care.svg']
    ];

    for (let i = 0; i < data.length; i++) {
      data[i].bg = ui[i][0];
      data[i].img = ui[i][1];
    };

    const el = (index) => {

      return `
      <div class="col-lg-4 col-md-6">

        <div class="tile${index+1} bg-${data[index].bg} rounded-5 mb-3">
          <div class="overflow-hidden position-relative" style="height: 3rem;">
            <img src="${data[index].img}" alt="" class="position-absolute top-0 end-0">
          </div>

          <div class="inner-tile bg-darkblue text-light p-4 rounded-5">
            <div class="d-flex justify-content-between mb-3">
              <span>${data[index].title}</span><strong>. . .</strong>
            </div>
            <div class='d-flex flex-lg-column'>
              <h1 class="current display-2 mb-0 mt-auto">${data[index].timeframes.weekly.current}hrs</h1>
              <p class='previous mb-auto mt-auto ms-auto ms-lg-0 text-desaturatedblue'>Last week - ${data[index].timeframes.weekly.previous}hrs</p>
            </div>
          </div>
        </div>
      </div>
      `
    }

    const target = document.getElementById('tiles');

    for (let i = 0; i < data.length; i++) {
      target.insertAdjacentHTML('beforeend', el(i))
    }

    const timeUnit = {
      weekly : 'week',
      daily: 'day',
      monthly: 'month'
    }

    $('.link').click(function(){
      let timestamp = $(this).html();
      
      for(let i=0; i<data.length;i++){
        $(`.tile${i + 1} .current`).html(`${data[i].timeframes[timestamp].current}hrs`);
        $(`.tile${i + 1} .previous`).html(`Last ${timeUnit[timestamp]} - ${data[i].timeframes[timestamp].previous}hrs`);
      }

      $(this).addClass('active');
      $(this).siblings().removeClass('active');
    })

  </script>
</body>

</html>